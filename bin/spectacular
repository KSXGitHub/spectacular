#!/usr/bin/env node
// Generated by CoffeeScript 1.6.2
var ROOT, SPECTACULAR, args, binPath, exists, fs, node, option, options, path, vm, _i, _len, _ref,
  __slice = [].slice;

fs = require('fs');

vm = require('vm');

path = require('path');

exists = fs.exists || path.exists;

SPECTACULAR = path.resolve(__dirname, '..');

ROOT = path.resolve('.');

_ref = process.argv, node = _ref[0], binPath = _ref[1], args = 3 <= _ref.length ? __slice.call(_ref, 2) : [];

options = {
  coffee: false,
  verbose: false,
  globs: []
};

for (_i = 0, _len = args.length; _i < _len; _i++) {
  option = args[_i];
  switch (option) {
    case '--coffee':
    case '-c':
      options.coffee = true;
      require('coffee-script');
      break;
    case '--trace':
    case '-t':
    case '--verbose':
    case '-v':
      options.verbose = true;
      break;
    default:
      options.globs.push(option);
  }
}

if (options.verbose) {
  console.log('options:', options);
}

exists(path.resolve(ROOT, 'node_modules/spectacular'), function(exist) {
  var spectacular;

  if (exist) {
    spectacular = require(path.resolve(ROOT, 'node_modules/spectacular/lib/index'));
  } else {
    spectacular = require(path.resolve(SPECTACULAR, 'lib/index'));
  }
  return spectacular.run(options).then(function(status) {
    return process.exit(status);
  });
});

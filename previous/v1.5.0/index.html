<!DOCTYPE html><html lang="en" class="introduction"><head><meta charset="utf-8"><title>Spectacular - Introduction</title><link href="http://fonts.googleapis.com/css?family=Roboto:400,100,300" rel="stylesheet" type="text/css"><link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/3.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.2.1/pure-min.css"><link href="css/caniuse.css" rel="stylesheet" type="text/css"><link href="css/page.css" rel="stylesheet" type="text/css"><script src="http://cdnjs.cloudflare.com/ajax/libs/coffee-script/1.6.2/coffee-script.min.js" type="text/javascript"></script></head><body><div id="layout" class="pure-g-r content"><div id="nav" class="pure-u"><a href="#" class="nav-menu-button">Menu</a><header><h1>Spectacular</h1><h2>1.5.0</h2></header><div class="nav-inner"><div class="pure-menu pure-menu-open"><ul><li><a href=".">Home</a></li><li><a href=".#download">Download</a></li><li><a href="./examples.html">Writing Tests</a></li><li><a href="./tools.html">Tests Tools</a></li><li><a href="./extend.html">Extend Spectacular</a></li><li><a href="./tests.html">Online Test Tool</a></li><li><a href="./changelog.html">ChangeLog</a></li><li><a href="./previous.html">Archives</a></li></ul></div><hr><a href="https://github.com/abe33/spectacular" class="fork"><i class="icon-github"></i>Fork me on GitHub</a><div class="badges"><a href="https://travis-ci.org/abe33/spectacular"><img src="https://travis-ci.org/abe33/spectacular.png" alt="Build Status"></a><a href="https://coveralls.io/r/abe33/spectacular?branch=master"><img src="https://coveralls.io/repos/abe33/spectacular/badge.png?branch=master" alt="Coverage Status"></a><a href="https://gemnasium.com/abe33/spectacular"><img src="https://gemnasium.com/abe33/spectacular.png" alt="Dependency Status"></a><a href="http://badge.fury.io/js/spectacular"><img src="https://badge.fury.io/js/spectacular.png" alt="NPM version"></a></div></div></div><div id="list" class="pure-u-1"><nav id="toc"></nav></div><div id="main" class="pure-u-1"><div class="gutter"><h1>Introduction</h1><p>Spectacular is a <abbr title='Behavior-Driven Development'>BDD</abbr> framework for CoffeeScript and JavaScript whose attempt to bring the power of RSpec to JavaScript. Spectacular tries to favor the best practices used for writing <a href="http://betterspecs.org/">better RSpec tests</a> in its design.</p>
<p>These are the kind of tests you can write with Spectacular:</p>
<pre><code class="lang-coffeescript">describe Array, -&gt;
  given <span class="string">'item'</span>, -&gt; foo: <span class="string">'bar'</span>

  it -&gt; should exist

  itsInstance <span class="string">'length'</span>, -&gt; should equal <span class="number">0</span>

  describe <span class="string">'::indexOf'</span>, -&gt;
    context <span class="string">'with an item not present in the array'</span>, -&gt;
      itsReturn <span class="reserved">with</span>: (-&gt; [<span class="property">@item</span>]), -&gt; should equal -<span class="number">1</span>

    context <span class="string">'with an item present in the array'</span>, -&gt;
      subject <span class="string">'array'</span>, -&gt; [<span class="property">@item</span>]

      specify <span class="string">'the returned value'</span>, -&gt;
        expect(<span class="property">@array</span>.indexOf <span class="property">@item</span>).to equal <span class="number">0</span></code></pre>
<h2>Features, the short tour</h2>
<ul>
<li>Conditioned Specs</li>
<li>Matcher based description</li>
<li>Implicit subjects</li>
<li>Describe auto-subject</li>
<li>Factories</li>
<li>JSON and HTML fixtures (and more)</li>
<li>Promised-based tests run</li>
<li>Synchronous and asynchronous matchers</li>
<li>Synchronous and asynchronous tests</li>
<li>Browser support</li>
<li>Shared examples</li>
<li>Custom matchers</li>
<li>CSS-queries expressions to test the DOM content</li>
<li>Strings and objects diff in comparison results</li>
<li>The API is provided with both camelCase and snake_case version</li>
<li>No external dependencies in browsers</li>
</ul>
<hr>
<h2>Install</h2>
<h3>NodeJS</h3>
<p>Spectacular is available as a <a href="http://npmjs.org/">npm</a> module, you can then install it with:</p>
<pre><code class="lang-shell">npm install -g spectacular</code></pre>
<p>This will install Spectacular globally and allow you to use the Spectacular command line tool.</p>
<h3>Browser</h3>
<p>First download Spectacular:</p>
<div id="download"><a href='spectacular-1.5.0.zip' class='download' target='_blank'><i class='icon-download'></i>Download</a></div>

<p>Then puts Spectacular in your html file:</p>
<pre><code class="lang-xml"><span class="tag">&lt;<span class="title">link</span> <span class="attribute">href</span>=<span class="value">"build/css/spectacular.css"</span> <span class="attribute">rel</span>=<span class="value">"stylesheet"</span> <span class="attribute">type</span>=<span class="value">"text/css"</span>/&gt;</span>
<span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"build/vendor/snap.js"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>/&gt;</span><span class="javascript">
&lt;script src=<span class="string">"build/vendor/jade.js"</span> type=<span class="string">"text/javascript"</span>/&gt;
<span class="xml"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"build/js/spectacular.js"</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>/&gt;</span><span class="javascript">
&lt;script src=<span class="string">"build/js/templates.js"</span> type=<span class="string">"text/javascript"</span>/&gt;</span></span></span></code></pre>
<p>You can see the runner live on the <a href="/tests.html">Online Test Tool</a> page.</p>
<p>You can pass options to spectacular by defining <code>spectacular.options</code> before the spectacular script node :</p>
<pre><code class="lang-coffeescript">spectacular =
  options:
    verbose: <span class="literal">false</span>
    trace: <span class="literal">true</span>
    longTrace: <span class="literal">false</span>
    showSource: <span class="literal">true</span>
    fixturesRoot: <span class="string">'./js/fixtures'</span>
    globs: []</code></pre>
<p>You can also pass an array containing the paths to the specs files in a <code>spectacular.paths</code> array.</p>
<pre><code class="lang-coffeescript">spectacular =
  paths: [<span class="string">'js/specs.js'</span>]</code></pre>
<p>It will allow the runner to crop the stack at the point a spec file is found and display the source of the test that failed. Errored test&#39;s stack is not cropped.</p>
<h4>Spectacular Server</h4>
<p>If you don&#39;t want to bother create a html file to run your test you can use the server feature of Spectacular.</p>
<p>By running:</p>
<pre><code class="lang-bash">spectacular server specs/**/*.spec.coffee</code></pre>
<p>You start a server that can be accessed on <code>http://localhost:5000</code>. It bootstrap Spectacular for you with your tests, helpers, matchers, etc.</p>
<p>The same server is used to run tests on <a href="http://phantomjs.org/">PhantomJS</a> and <a href="http://slimerjs.org/">SlimerJS</a>.</p>
<h4>Source Map Support</h4>
<p>If you use the Spectacular server to test your code on the browser, no additional configuration is needed. However, if you use Spectacular in your own test page some additional configuration is needed to enable source mapping.</p>
<p>In order for Spectacular to kown which files have source mapping and how to retrieve the source and the mapping for that file, some methods have to be defined in the options before the Spectacular start:</p>
<ul>
<li><code>hasSourceMap</code>: A function that takes an url and return true if the file have source map support.</li>
<li><code>getSourceURLFor</code>: A function that takes an url and return the url of the corresponding source file.</li>
<li><code>getSourceMapURLFor</code>: A function that takes an url and return the url of the json containing the source mapping.</li>
</ul>
<p>A concrete example can be seen in the Spectacular server&#39;s source :</p>
<pre><code class="lang-javascript">spectacular.options.hasSourceMap = <span class="keyword">function</span>(file) {
  <span class="keyword">return</span> <span class="regexp">/\.coffee$/</span>.test(file);
};
spectacular.options.getSourceURLFor = <span class="keyword">function</span>(file) {
  <span class="keyword">return</span> file.replace(<span class="string">'.coffee'</span>, <span class="string">'.coffee.src'</span>)
};
spectacular.options.getSourceMapURLFor = <span class="keyword">function</span>(file) {
  <span class="keyword">return</span> file.replace(<span class="string">'.coffee'</span>, <span class="string">'.map'</span>)
};</code></pre>
<h4>Browser Support</h4>
<p>Spectacular rely on some feature that may not be available in all browsers. You can find below the list of features and the minimum browser version needed to use them.</p>
<div class="caniuse_static">
  <h1>Object.defineProperty</h1>
  <p class="status">ECMAScript 5</p>
  <p>Supported from the following versions:</p>
  <h2 id="Desktop">Desktop</h2>
  <ul class="agents">
    <li title="Chrome - Yes" class="icon-chrome y"><span class="version">5</span></li>
    <li title="Firefox - Yes" class="icon-firefox y"><span class="version">4</span></li>
    <li title="IE - Yes" class="icon-ie y"><span class="version">9</span></li>
    <li title="Opera - Yes" class="icon-opera y"><span class="version">11.60</span></li>
    <li title="Safari - Yes" class="icon-safari y"><span class="version">5.1</span></li>
  </ul>
  <h2 id="Mobile-Tablet">Mobile / Tablet</h2>
  <ul class="agents">
    <li title="iOS Safari - Yes" class="icon-ios_saf y"><span class="version">0</span></li>
    <li title="Android Browser - Yes" class="icon-android y"><span class="version">0</span></li>
    <li title="Opera Mobile - Yes" class="icon-op_mob y"><span class="version">11.50</span></li>
    <li title="Chrome for Android - Yes" class="icon-and_chr y"><span class="version">0</span></li>
    <li title="Firefox for Android - Yes" class="icon-and_ff y"><span class="version">4</span></li>
  </ul>
  <ul class="legend">
    <li>Supported:</li>
    <li class="y">Yes</li>
    <li class="n">No</li>
    <li class="a">Partially</li>
    <li class="p">Polyfill</li>
  </ul>
  <p class="stats">Stats from <a href="http://mdn.beonex.com/en/JavaScript/Reference/Global_Objects/Object/defineProperties.html" target="_blank">mdn</a></p>
</div>
<div class="caniuse" data-feature="querySelector"></div>

<h2>Command-line</h2>
<p>The most simple way to use the spectacular command line tool is as follow:</p>
<pre><code class="lang-shell">spectacular test specs/**/*.spec.js</code></pre>
<h3>Commands</h3>
<table cellspacing="0">
  <tr>
    <td><code>test</code></td>
    <td>Runs the tests on NodeJS.</td>
  </tr>

  <tr>
    <td><code>server</code></td>
    <td>Starts a server. The specs can then be accessed from a browser at the the following address: <code>http://localhost:5000</code>. The default port can be changed by setting the <code>PORT</code> environment variable.</td>
  </tr>

  <tr>
    <td><code>phantomjs</code></td>
    <td>Assuming you have PhantomJS installed, it starts a server and run the test on PhantomJS.</td>
  </tr>

  <tr>
    <td><code>slimerjs</code></td>
    <td>Assuming you have SlimerJS installed, it starts a server and run the test on SlimerJS.</td>
  </tr>
</table>

<h3>Options</h3>
<table cellspacing="0">
  <tr>
    <td><code>-c, --coffee</code></td>
    <td>Add support for CoffeeScript files. You can now run your specs with: <code>spectacular --coffee specs/**/*.coffee</code>.</td>
  </tr>
  <tr>
    <td><code>-f, --format</code></td>
    <td>Select the console output format (progress|documentation).</td>
  </tr>
  <tr>
    <td><code>-r, --require PATH</code></td>
    <td>Adds <code>PATH</code> to the array of paths to includes.</td>
  </tr>
  <tr>
    <td><code>-v, --verbose</code></td>
    <td>Enable verbose output.</td>
  </tr>
  <tr>
    <td><code>-t, --trace</code></td>
    <td>Enable stack trace report for failures (default is <code>true</code>).</td>
  </tr>
  <tr>
    <td><code>--long-trace</code></td>
    <td>By default the stack traces are cropped after 6 lines to limit the amount of output. You can display the full stack trace with this option.</td>
  </tr>
  <tr>
    <td><code>-p, --profile</code></td>
    <td>Add a report with the 10 slowest examples at the end of the output.</td>
  </tr>
  <tr>
    <td class="deprecated"><code>-d, --documentation</code></td>
    <td>Use <code>--format=documentation</code> option instead.</td>
  </tr>
  <tr class='deprecated'>
    <td><code>-s, --server</code></td>
    <td>Use the <code>server</code> command instead.</td>
  </tr>
  <tr class='deprecated'>
    <td><code>--phantomjs</code></td>
    <td>Use the <code>phantomjs</code> command instead.</td>
  </tr>
  <tr>
    <td><code>--phantomjs-bin PATH</code></td>
    <td>Pass the path to the PhantomJS binary.</td>
  </tr>
  <tr>
    <td><code>--slimerjs-bin PATH</code></td>
    <td>Pass the path to the SlimerJS binary.</td>
  </tr>
  <tr>
    <td><code>--source GLOB</code></td>
    <td>When using the server, it allow to add files that matches the patterns as served files in the html runner. You can use this option as many times as you need.</td>
  </tr>
  <tr>
    <td><code>--map, --source-map</code></td>
    <td>Enable the support for CoffeeScript source map on both node and browsers. When using this mode with the browser without relying on the Spectacular server additional setup is required, please see the <a href="/#Source-Map-Support">Source Map Support</a> section for details.</td>
  </tr>
  <tr>
    <td class='deprecated'><code>-m, --matchers PATH</code></td>
    <td>Use <code>--require PATH</code> instead.</td>
  </tr>
  <tr>
    <td class="deprecated"><code>--helpers PATH</code></td>
    <td>Use <code>--require PATH</code> instead.</td>
  </tr>
  <tr>
    <td><code>--fixtures PATH</code></td>
    <td>Specify the path where project fixtures can be found, by default fixtures are loaded from <code>./specs/support/fixtures</code>.</td>
  </tr>
  <tr>
    <td><code>--no-trace</code></td>
    <td>Remove stack trace from failures reports.</td>
  </tr>
  <tr>
    <td><code>--random</code></td>
    <td>Enable tests randomization.</td>
  </tr>
  <tr>
    <td><code>--no-random</code></td>
    <td>Disable tests randomization.</td>
  </tr>
  <tr>
    <td><code>--seed INT</code></td>
    <td>Sets the seed for the tests randomization.</td>
  </tr>
  <tr>
    <td><code>--colors</code></td>
    <td>Enable coloring of the output.</td>
  </tr>
  <tr>
    <td><code>--no-colors</code></td>
    <td>Disable coloring of the output.</td>
  </tr>
  <tr>
    <td class="deprecated"><code>--no-matchers</code></td>
    <td>Don&#39;t require your matchers instead.</td>
  </tr>
  <tr>
    <td class="deprecated"><code>--no-helpers</code></td>
    <td>Don&#39;t require your helpers instead.</td>
  </tr>
</table>

<p>Options can also be defined in a <code>.spectacular</code> file at the root of your project.</p>
</div></div><script src="js/caniuse.js" type="text/javascript"></script></div><script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script><script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js" type="text/javascript"></script><script src="js/pages.js" type="text/javascript"></script></body></html>